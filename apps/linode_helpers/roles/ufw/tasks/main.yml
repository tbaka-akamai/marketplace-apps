---
- name: install ufw
  apt:
    pkg:
    - ufw
    state: present

- name: ufw allow outgoing
  community.general.ufw:
    direction: outgoing
    policy: allow

- name: ufw deny incoming
  community.general.ufw:
    direction: incoming
    policy: deny

- name: ufw enable
  community.general.ufw:
    state: enabled

- name: enable systemd ufw
  service:
    name: ufw
    state: restarted

# UFW rules are provided in ufw_rules.yml in roles/$APP/tasks